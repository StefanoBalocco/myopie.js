"use strict";class myopie{constructor(t,e,i=1e3){this.timer=null,this.id=t,this.template=e,this.timeout=i}SameNode(t,e){return t.nodeType===e.nodeType&&t.tagName===e.tagName&&t.id===e.id&&t.src===e.src}DiffNode(t,e){const i=t.childNodes,s=e.childNodes,l=i.length;for(let t=0;t<l;t++){const l=Object.assign({},i[t]);if(void 0===s[t])e.appendChild(l);else{let e=!1;if(!this.SameNode(l,s[t])){let i=Array.from(s).slice(t+1).find((t=>this.SameNode(l,t)));i?s[t].before(i):(s[t].before(l),e=!0)}if(!e){const e=l.childNodes&&l.childNodes.length?null:l.textContent;if(e!=(s[t].childNodes&&s[t].childNodes.length?null:s[t].textContent)&&(s[t].textContent=e),1===l.nodeType){const e=l.attributes,i=s[t].attributes;for(let{name:i,value:o}of e)["value","checked","selected"].includes(i)&&["input","option","textarea"].includes(l.tagName.toLowerCase())||s[t].setAttribute(i,o);for(let{name:l,value:o}of i)null===e.getNamedItem(l)&&(["value","checked","selected"].includes(l)&&["input","option","textarea"].includes(s[t].tagName.toLowerCase())||s[t].removeAttribute(l))}if(!l.childNodes.length&&s[t].childNodes.length)s[t].innerHTML="";else if(!s[t].childNodes.length&&l.childNodes.length){let t=document.createDocumentFragment();this.DiffNode(l,t)}else this.DiffNode(l,s[t])}}}}render(){this.timer=null;const t=document.getElementById(this.id);if(null!=t){let e=(new DOMParser).parseFromString(this.template(this.data),"text/html");e.head&&e.head.childNodes&&e.head.childNodes.length&&Array.from(e.head.childNodes).reverse().forEach((function(t){e.body.insertBefore(t,e.body.firstChild)}));const i=e&&e.body?e.body:document.createElement("body");this.DiffNode(i,t)}}get(t){let e=this.data;if(null!=t){let i=t.split(/(?<!(?<!\\)\\)\//);const s=i.length;for(let t=0;t<s-1&&void 0!==e;t++)if(Array.isArray(e)||"object"==typeof e){const s=i[t];e=void 0!==e[s]?e[s]:void 0}else e=void 0}return e}set(t,e,i=!0){let s=this.data,l=t.split(/(?<!(?<!\\)\\)\//);const o=l.length;for(let t=0;t<o-1;t++){let e=l[t];void 0===s[e]&&(s[e]={}),s=s[e]}s[l[o-1]]=e,i&&(null!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.render,this.timeout))}}